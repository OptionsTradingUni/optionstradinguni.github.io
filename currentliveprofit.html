<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Recent Trades - Options Trading University</title>
  <style>
    :root {
      --blue:#2a7fff; --pink:#ff4081; --nav:#0b1328; --mid:#163067;
      --ink:#0f1a33; --light:#eaf1ff; --faded:#9cb2ff;
      --success:#22c55e; --danger:#ef4444;
    }
    *{box-sizing:border-box;}
    body{margin:0;font-family:'Poppins',sans-serif;background:#0b1328;color:var(--light);}
    a{text-decoration:none;color:inherit;}

    /* Sidebar */
    .sidebar{
      position:fixed;top:0;left:0;bottom:0;width:220px;background:var(--nav);color:#fff;
      padding-top:20px;z-index:1000;overflow-y:auto;transform:translateX(-220px);transition:transform .3s ease;
    }
    .sidebar.active{transform:translateX(0);}
    .brand{display:flex;align-items:center;gap:10px;padding:10px;font-weight:800;}
    .brand-logo{width:30px;height:30px;border-radius:6px;object-fit:cover;}
    .brand span{background:linear-gradient(90deg,var(--blue),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:900;}
    .side-nav{display:flex;flex-direction:column;padding:10px;gap:6px;}
    .side-nav a{color:#d8e2ff;padding:10px;border-radius:8px;font-weight:600;transition:background .25s;}
    .side-nav a:hover{background:#163067;}
    .side-nav a.active{background:#1a2b68;}
    .close-sidebar{display:none;background:none;border:none;color:#fff;font-size:20px;cursor:pointer;margin:10px;align-self:flex-end;}

    /* Topbar */
    .topbar{
      background:linear-gradient(90deg,var(--blue),var(--pink));
      color:#fff;display:flex;justify-content:space-between;align-items:center;padding:14px 20px;
    }
    .burger{font-size:1.5em;background:none;border:none;color:#fff;cursor:pointer;}
    .btn{background:#fff;color:var(--blue);border:none;border-radius:6px;padding:8px 14px;cursor:pointer;font-weight:600;text-decoration:none;transition:.2s;}
    .btn:hover{transform:scale(1.05);}

    /* Content */
    .page{margin-left:0;min-height:100vh;display:flex;flex-direction:column;}
    .container{max-width:1000px;margin:30px auto;padding:20px;}

    .header-title{
      text-align:center;font-size:2em;font-weight:800;margin-bottom:10px;
      background:linear-gradient(90deg,var(--blue),var(--pink));
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
    }
    .subheader{text-align:center;color:var(--faded);margin-bottom:20px;}

    .join-btn{
      display:inline-block;padding:10px 20px;
      background:linear-gradient(90deg,var(--blue),var(--pink));
      color:#fff;border:none;border-radius:8px;
      font-weight:700;font-size:1em;font-family:'Poppins',sans-serif;
      cursor:pointer;transition:transform .2s,box-shadow .2s;
    }
    .join-btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.3);}
    .join-btn[disabled]{background:#aaa;cursor:not-allowed;transform:none;box-shadow:none;}

    #trades-list{
      margin-top:30px;background:var(--mid);border-radius:12px;
      box-shadow:0 4px 10px rgba(0,0,0,0.4);overflow:hidden;
    }
    .trade-item-link{display:block;color:inherit;}
    .trade-item{
      display:flex;justify-content:space-between;align-items:center;
      padding:18px 25px;border-bottom:1px solid rgba(255,255,255,0.1);
      transition:background .3s;
    }
    .trade-item:last-child{border-bottom:none;}
    .trade-item-link:hover .trade-item{background:rgba(255,255,255,0.08);}
    .trade-details{flex:1;}
    .trade-details strong{font-size:1.2em;display:block;color:#fff;margin-bottom:3px;}
    .trade-details small{color:var(--faded);}
    .trade-performance{text-align:right;min-width:120px;}
    .trade-profit{color:var(--success);font-weight:700;font-size:1.3em;}
    .trade-loss{color:var(--danger);font-weight:700;font-size:1.3em;}
    .trade-roi{color:var(--faded);font-size:.9em;}
    .loading-message,.error-message,.no-trades-message{
      text-align:center;padding:40px;color:var(--faded);font-size:1.1em;
    }
    .error-message{color:var(--danger);}

    .back-btn{
      display:inline-block;margin-top:30px;padding:12px 25px;
      background:#111b3c;border:2px solid var(--blue);border-radius:8px;
      color:#fff;font-weight:600;text-decoration:none;transition:.2s;
    }
    .back-btn:hover{background:var(--blue);}

    .footer{
      margin-top:auto;background:var(--nav);color:var(--faded);
      text-align:center;padding:16px;border-top:1px solid rgba(255,255,255,0.1);
      font-size:.9em;
    }

    @media(max-width:768px){
      .sidebar{transform:translateX(-220px);}
      .sidebar.active{transform:translateX(0);}
      .close-sidebar{display:block;}
      .page{margin-left:0;}
      .burger{display:block;}
      .trade-item{flex-direction:column;align-items:flex-start;padding:14px;}
      .trade-performance{text-align:left;margin-top:8px;}
    }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <button class="close-sidebar" id="closeSidebar">‚úï</button>
    <div class="brand"><img src="branding/logo.jpeg" class="brand-logo"><span>OTU</span></div>
    <nav class="side-nav">
      <a href="index.html">Home</a>
      <a href="glossary.html">Glossary</a>
      <a href="modules.html">Modules</a>
      <a href="testimonials.html">Testimonials</a>
      <a href="contact.html">Contact</a>
      <a href="recenttrades.html" class="active">Recent Trades</a>
      <a href="terms.html">Disclaimer</a>
    </nav>
  </aside>

  <!-- Main Page -->
  <div class="page">
    <header class="topbar">
      <button class="burger" id="burger">‚ò∞</button>
      <div>Recent Trades</div>
      <button id="join-group-btn" data-link="https://t.me/+v2cZ4q1DXNdkMjI8" class="btn">Join Log Group</button>
    </header>

    <main class="container">
      <h1 class="header-title">üìà Latest Verified Trades</h1>
      <p class="subheader">Live-synced from the OTU Trade Network</p>

      <div id="trades-list">
        <p class="loading-message">Loading the latest trades...</p>
      </div>

      <div style="text-align:center;">
        <a href="index.html" class="back-btn">‚Üê Back to Homepage</a>
      </div>
    </main>

    <footer class="footer">¬© 2025 Options Trading University. All rights reserved. Data provided for educational purposes.</footer>
  </div>

  <!-- ‚úÖ JS Logic -->
  <script>
    // Sidebar toggle
    const burger=document.getElementById('burger');
    const sidebar=document.getElementById('sidebar');
    const closeSidebar=document.getElementById('closeSidebar');
    burger.addEventListener('click',()=>{sidebar.classList.add('active');});
    closeSidebar.addEventListener('click',()=>{sidebar.classList.remove('active');});

    // TikTok restriction for Telegram links
    const joinGroupBtn=document.getElementById('join-group-btn');
    const isTikTok=navigator.userAgent.includes("TikTok");
    if(isTikTok){joinGroupBtn.disabled=true;}
    joinGroupBtn.addEventListener('click',()=>{
      if(!joinGroupBtn.disabled){
        window.open(joinGroupBtn.dataset.link,'_blank','noopener,noreferrer');
      }
    });

    // Fetch trades from API
    const apiUrl='https://logs.optionstradinguni.online/api/recent100';
    const logBaseUrl='https://logs.optionstradinguni.online';
    const tradesList=document.getElementById('trades-list');

    async function fetchTrades(){
      try{
        const res=await fetch(apiUrl);
        if(!res.ok) throw new Error(res.status);
        const data=await res.json();
        tradesList.innerHTML='';
        if(data && data.length>0){
          data.forEach(t=>{
            const profitClass=t.profit>=0?'trade-profit':'trade-loss';
            const profitSign=t.profit>=0?'+':'';
            const a=document.createElement('a');
            a.className='trade-item-link';
            a.href=`${logBaseUrl}/log/${t.txid}`;
            a.target='_blank';
            a.rel='noopener noreferrer';
            a.innerHTML=`
              <div class="trade-item">
                <div class="trade-details">
                  <strong>${t.symbol}</strong>
                  <small>Trader: ${t.trader_name} ‚Ä¢ ${t.time_ago}</small>
                </div>
                <div class="trade-performance">
                  <div class="${profitClass}">${profitSign}$${t.profit.toFixed(2)}</div>
                  <div class="trade-roi">ROI: ${t.roi.toFixed(2)}%</div>
                </div>
              </div>
            `;
            tradesList.appendChild(a);
          });
        } else {
          tradesList.innerHTML='<p class="no-trades-message">No recent trades found.</p>';
        }
      }catch(e){
        console.error(e);
        tradesList.innerHTML='<p class="error-message">‚ö†Ô∏è Failed to load trades. Please try again later.</p>';
        clearInterval(interval);
      }
    }

    fetchTrades();
    const interval=setInterval(fetchTrades,30000);
  </script>
</body>
</html>
